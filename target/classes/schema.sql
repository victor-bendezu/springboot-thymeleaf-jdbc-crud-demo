DROP TABLE IF EXISTS PRODUCT_TYPE;
DROP TABLE IF EXISTS PRODUCT_CLASSIFICATION;

CREATE TABLE PRODUCT_CLASSIFICATION (
  ID_CLASSIFICATION INT AUTO_INCREMENT PRIMARY KEY,
  CODE VARCHAR(20) NOT NULL,
  NAME VARCHAR(100) NOT NULL,
  ACTIVE INT NOT NULL DEFAULT 1
);

CREATE TABLE PRODUCT_TYPE (
  ID_PRODUCT_TYPE INT AUTO_INCREMENT PRIMARY KEY,
  CODE VARCHAR(20) NOT NULL,
  NAME VARCHAR(120) NOT NULL,
  ID_CLASSIFICATION INT NOT NULL,
  STATUS INT NOT NULL DEFAULT 1,
  CONSTRAINT FK_PT_CLASSIFICATION
    FOREIGN KEY (ID_CLASSIFICATION)
    REFERENCES PRODUCT_CLASSIFICATION(ID_CLASSIFICATION)
);

-- H2 "stored procedures" using ALIAS (Java methods)
CREATE ALIAS IF NOT EXISTS SP_LIST_PRODUCT_CLASSIFICATIONS
  FOR "com.victor.portfolio.db.H2Procedures.spListProductClassifications";

CREATE ALIAS IF NOT EXISTS SP_LIST_PRODUCT_TYPES
  FOR "com.victor.portfolio.db.H2Procedures.spListProductTypes";

CREATE ALIAS IF NOT EXISTS SP_SAVE_PRODUCT_TYPE
  FOR "com.victor.portfolio.db.H2Procedures.spSaveProductType";

CREATE ALIAS IF NOT EXISTS SP_DELETE_PRODUCT_TYPE
  FOR "com.victor.portfolio.db.H2Procedures.spDeleteProductType";
